#include "Arduino.h"
#include <LiquidCrystal_I2C.h>

LiquidCrystal_I2C lcd(0x27, 16, 2); // I2C address 0x27, 16 column and 2 rows


 byte Pfeil[] = {
  B00000,
  B00100,
  B00110,
  B11111,
  B11111,
  B00110,
  B00100,
  B00000
};

byte Laden[4][8] = {
  {B00000,
  B00000,
  B01010,
  B11011,
  B01110,
  B00100,
  B00000,
  B00000},
  {B00000,
  B00100,
  B01110,
  B11000,
  B01110,
  B00100,
  B00000,
  B00000},
  {B00000,
  B00100,
  B01110,
  B11011,
  B01010,
  B00000,
  B00000,
  B00000},
  {B00000,
  B00100,
  B01110,
  B00011,
  B01110,
  B00100,
  B00000,
  B00000}
};

int iChMenu = 0;
int iSelMen = 1;
bool CURSOR = true;

String sMenu[3][3] = {
  {"FAN","FALSE","1"},
  {"PUMP","FALSE","6"},
  {"LED","TRUE","12"}
  };
const int iMenuPos[3][2] = {
  {0,4},
  {5,10},
  {11,16}
};


void setup()
{
  lcd.init(); //initialize the lcd
  lcd.backlight(); //open the backlight
  lcd.clear();
  for(int i = 1;i<=3;i++){
    lcd.setCursor(sMenu[i-1][2].toInt(),1);
    lcd.print(sMenu[i-1][0]);
  }

  lcd.createChar(0, Pfeil);
  lcd.createChar(1, Laden[0]);
  lcd.createChar(2, Laden[1]);
  lcd.createChar(3, Laden[2]);
  lcd.createChar(0, Laden[3]);
}


void loop()
{
  iSelMen++;
  LOOP_UI();
  if(iSelMen>3)iSelMen=0;
}

void LOOP_STEUERUNG(){
}

int iTEMPUI1 = 0;
void LOOP_UI(){
  /*if(CURSOR){
  delay(400);
  lcd.setCursor(iMenuPos[iSelMen-1][0],1);
  lcd.printf(">");
  delay(400);
  lcd.setCursor(iMenuPos[iSelMen-1][0],1);
  lcd.print(" ");
  }*/
  boolean bval1;
  for(int i=1;i<5;i++){
  TryParse(sMenu[i-1][2] , out bval1)); 
    if(bval1){
    lcd.setCursor(iMenuPos[iTEMPUI1-1][1],1);
    lcd.write(i);
    delay(200);}
  iTEMPUI1++;
  };
}


/*if(sMenu[i-1][2]=="AN"){
      lcd.setCursor(sMenu[i-1][3].toInt(),1);
      lcd.print(sMenu[i-1][1]);
      lcd.printf("\xFF");
    }else{
      lcd.setCursor(sMenu[i-1][3].toInt(),1);
      lcd.print(sMenu[i-1][0]);
    }
    */

   